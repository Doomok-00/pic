<!DOCTYPE html>
<img />
<input class="caption" placeholder="내용 입력" />
</div>
</div>


<div class="buttons">
<button onclick="exportJPG()">JPG 저장</button>
<button onclick="exportPDF()">PDF 저장</button>
</div>


<!-- 라이브러리 -->
<script src="https://cdn.jsdelivr.net/npm/html2canvas@1.4.1/dist/html2canvas.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/jspdf@2.5.1/dist/jspdf.umd.min.js"></script>


<!-- 스크립트 -->
<script>
function loadImage(input, index) {
const file = input.files[0];
if (!file) return;


const reader = new FileReader();
reader.onload = e => {
document.querySelectorAll('.photo-box img')[index].src = e.target.result;
};
reader.readAsDataURL(file);
}


function exportJPG() {
html2canvas(document.getElementById('board'), {
scale: 1.5,
useCORS: true
}).then(canvas => {
let quality = 0.8; // 초기 화질
let dataUrl;


do {
dataUrl = canvas.toDataURL('image/jpeg', quality);
quality -= 0.1;
} while (dataUrl.length / 1024 / 1024 > 3 && quality > 0.4);


const link = document.createElement('a');
link.download = '사진대지.jpg';
link.href = dataUrl;
link.click();
});
}).then(canvas => {
const link = document.createElement('a');
link.download = '사진대지.jpg';
link.href = canvas.toDataURL('image/jpeg');
link.click();
});
}


function exportPDF() {
html2canvas(document.getElementById('board'), {
scale: 1.5,
useCORS: true
}).then(canvas => {
let quality = 0.8;
let imgData;


do {
imgData = canvas.toDataURL('image/jpeg', quality);
quality -= 0.1;
} while (imgData.length / 1024 / 1024 > 3 && quality > 0.4);


const { jsPDF } = window.jspdf;
const pdf = new jsPDF('p', 'mm', 'a4', true);
pdf.addImage(imgData, 'JPEG', 0, 0, 210, 297, undefined, 'FAST');
pdf.save('사진대지.pdf');
});
}).then(canvas => {
const imgData = canvas.toDataURL('image/jpeg');
const { jsPDF } = window.jspdf;
const pdf = new jsPDF('p', 'mm', 'a4');
pdf.addImage(imgData, 'JPEG', 0, 0, 210, 297);
pdf.save('사진대지.pdf');
});
}
</script>


</body>
</html>
